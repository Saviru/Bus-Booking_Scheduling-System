<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>View Backup Details</title>
    <meta charset="UTF-8">
</head>
<body>
    <h1>Backup Details</h1>
    
    <div>
        <a href="/it-support/backup/history">Back to Backup History</a> |
        <a th:href="@{/it-support/backup/configs/{id}(id=${backup.backupConfig.id})}">View Configuration</a>
    </div>
    
    <div>
        <h3>Configuration Name</h3>
        <p th:text="${backup.backupConfig.name}"></p>
    </div>
    
    <div>
        <h3>Backup Type</h3>
        <p th:text="${backup.backupConfig.backupType}"></p>
    </div>
    
    <div>
        <h3>Start Time</h3>
        <p th:text="${backup.startTime}"></p>
    </div>
    
    <div>
        <h3>End Time</h3>
        <p th:text="${backup.endTime != null ? backup.endTime : 'In progress'}"></p>
    </div>
    
    <div>
        <h3>Duration</h3>
        <p th:text="${backup.durationMinutes != null ? backup.durationMinutes + ' minutes' : 'In progress'}"></p>
    </div>
    
    <div>
        <h3>Status</h3>
        <p th:text="${backup.status}"></p>
    </div>
    
    <div>
        <h3>File Size</h3>
        <p th:text="${backup.fileSizeMb != null ? #numbers.formatDecimal(backup.fileSizeMb, 1, 2) + ' MB' : 'N/A'}"></p>
    </div>
    
    <div>
        <h3>File Path</h3>
        <p th:text="${backup.filePath}"></p>
    </div>
    
    <div>
        <h3>Initiated By</h3>
        <p th:text="${backup.initiatedBy + (backup.user != null ? ' by ' + backup.user.fullName : '')}"></p>
    </div>
    
    <div th:if="${backup.errorMessage != null && !backup.errorMessage.empty}">
        <h3>Error Message</h3>
        <pre th:text="${backup.errorMessage}"></pre>
    </div>
    
    <div>
        <a th:href="@{/it-support/backup/history/{id}/delete(id=${backup.id})}"
           onclick="return confirm('Are you sure you want to delete this backup record?')">Delete This Backup</a>
    </div>
</body>
</html>