<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Edit Vehicle Condition Report</title>
    <meta charset="UTF-8">
</head>
<body>
    <h1>Edit Vehicle Condition Report</h1>
    
    <div>
        <a href="/driver/vehicle-reports">Back to Reports</a> |
        <a th:href="@{/driver/vehicle-reports/{id}(id=${report.id})}">View Report</a>
    </div>
    
    <form th:action="@{/driver/vehicle-reports/{id}/edit(id=${report.id})}" th:object="${report}" method="post">
        <h3>Driver & Vehicle Information</h3>
        
        <div>
            <label for="driverName">Driver Name:</label>
            <input type="text" id="driverName" th:field="*{driverName}" required>
            <span th:if="${#fields.hasErrors('driverName')}" th:errors="*{driverName}"></span>
        </div>
        
        <div>
            <label for="driverId">Driver ID:</label>
            <input type="text" id="driverId" th:field="*{driverId}">
        </div>
        
        <div>
            <label for="vehicleNumber">Vehicle Number:</label>
            <input type="text" id="vehicleNumber" th:field="*{vehicleNumber}" required>
            <span th:if="${#fields.hasErrors('vehicleNumber')}" th:errors="*{vehicleNumber}"></span>
        </div>
        
        <div>
            <label for="reportDate">Report Date:</label>
            <input type="datetime-local" id="reportDate" th:field="*{reportDate}" required>
            <span th:if="${#fields.hasErrors('reportDate')}" th:errors="*{reportDate}"></span>
        </div>
        
        <div>
            <label for="reportType">Report Type:</label>
            <select id="reportType" th:field="*{reportType}" required>
                <option value="PRE_TRIP">Pre-Trip Inspection</option>
                <option value="POST_TRIP">Post-Trip Inspection</option>
                <option value="MAINTENANCE_REQUEST">Maintenance Request</option>
                <option value="INCIDENT">Incident Report</option>
            </select>
            <span th:if="${#fields.hasErrors('reportType')}" th:errors="*{reportType}"></span>
        </div>
        
        <div>
            <label for="odometerReading">Odometer Reading (km):</label>
            <input type="number" id="odometerReading" th:field="*{odometerReading}" min="0">
        </div>
        
        <h3>Vehicle Condition</h3>
        
        <div>
            <label for="brakesCondition">Brakes:</label>
            <select id="brakesCondition" th:field="*{brakesCondition}" required>
                <option value="GOOD">Good</option>
                <option value="FAIR">Fair</option>
                <option value="POOR">Poor</option>
                <option value="NEEDS_ATTENTION">Needs Attention</option>
                <option value="UNKNOWN">Unknown</option>
            </select>
            <span th:if="${#fields.hasErrors('brakesCondition')}" th:errors="*{brakesCondition}"></span>
        </div>
        
        <div>
            <label for="lightsCondition">Lights:</label>
            <select id="lightsCondition" th:field="*{lightsCondition}" required>
                <option value="GOOD">Good</option>
                <option value="FAIR">Fair</option>
                <option value="POOR">Poor</option>
                <option value="NEEDS_ATTENTION">Needs Attention</option>
                <option value="UNKNOWN">Unknown</option>
            </select>
            <span th:if="${#fields.hasErrors('lightsCondition')}" th:errors="*{lightsCondition}"></span>
        </div>
        
        <div>
            <label for="tiresCondition">Tires:</label>
            <select id="tiresCondition" th:field="*{tiresCondition}" required>
                <option value="GOOD">Good</option>
                <option value="FAIR">Fair</option>
                <option value="POOR">Poor</option>
                <option value="NEEDS_ATTENTION">Needs Attention</option>
                <option value="UNKNOWN">Unknown</option>
            </select>
            <span th:if="${#fields.hasErrors('tiresCondition')}" th:errors="*{tiresCondition}"></span>
        </div>
        
        <div>
            <label for="exteriorCondition">Exterior:</label>
            <select id="exteriorCondition" th:field="*{exteriorCondition}">
                <option value="GOOD">Good</option>
                <option value="FAIR">Fair</option>
                <option value="POOR">Poor</option>
                <option value="NEEDS_ATTENTION">Needs Attention</option>
                <option value="UNKNOWN">Unknown</option>
            </select>
        </div>
        
        <div>
            <label for="interiorCondition">Interior:</label>
            <select id="interiorCondition" th:field="*{interiorCondition}">
                <option value="GOOD">Good</option>
                <option value="FAIR">Fair</option>
                <option value="POOR">Poor</option>
                <option value="NEEDS_ATTENTION">Needs Attention</option>
                <option value="UNKNOWN">Unknown</option>
            </select>
        </div>
        
        <div>
            <label for="fuelLevel">Fuel Level:</label>
            <select id="fuelLevel" th:field="*{fuelLevel}">
                <option value="FULL">Full</option>
                <option value="3/4">3/4</option>
                <option value="1/2">1/2</option>
                <option value="1/4">1/4</option>
                <option value="EMPTY">Empty</option>
            </select>
        </div>
        
        <div>
            <label for="details">Additional Details:</label>
            <textarea id="details" th:field="*{details}" rows="5" cols="50"></textarea>
        </div>
        
        <div>
            <label for="status">Status:</label>
            <select id="status" th:field="*{status}" required>
                <option value="PENDING">Pending</option>
                <option value="REVIEWED">Reviewed</option>
                <option value="IN_REPAIR">In Repair</option>
                <option value="RESOLVED">Resolved</option>
            </select>
            <span th:if="${#fields.hasErrors('status')}" th:errors="*{status}"></span>
        </div>
        
        <!-- Keep these fields as hidden to preserve their values -->
        <input type="hidden" th:field="*{createdAt}">
        <input type="hidden" th:field="*{reviewedBy}">
        <input type="hidden" th:field="*{reviewedDate}">
        <input type="hidden" th:field="*{maintenanceNotes}">
        <input type="hidden" th:field="*{followUpAction}">
        
        <div>
            <button type="submit">Update Report</button>
        </div>
    </form>
</body>
</html>